# Branch Predictor

## Introduction

This project implements a branch predictor simulator that implements the following branch prediction algorithms:
- Always Taken
- Standard 2-bit predictor
- gshare
- Profiled

The main goal of this project is to compare the performance of the different branch prediction algorithms, identifying key strengths and weaknesses of each.

## Project Structure

The project is structured as follows:
- `main.go`: The main entry point of the program. This file reads the trace file and configuration file, and runs the branch predictor simulator.
- `branchpred/`: This directory contains the implementation of the branch prediction algorithms.
- `instruction/`: This directory contains the implementation of the reading of trace files in instruction structures.
- `utils/`: This directory contains utility functions used by the branch predictor simulator.
- `configs/`: This directory contains example configuration files for each algorithm. These examples can be modified to test different configurations of the algorithms.
- `outputs/`: This directory contains the output files generated by the branch predictor simulator. Within this directory are two subdirectories:
    - `results/`: This directory contains the results of the simulation in JSON format. Each algorithm has its won subdirectory within this directory displaying its results for each trace file.
    - `metadata/`: This directory contains the output files in JSON format. Each algorithm has its own subdirectory within this directory displaying the metadata for each trace file.

## Instructions

To run using the executable:
```bash
./branch-predictor /cs/studres/CS4202/Coursework/P2-BranchPredictor/trace-files/<trace-file> configs/<config-file>
```
To compile and run:
```bash
go run main.go /cs/studres/CS4202/Coursework/P1-CacheSim/trace-files/<trace-file>
```
To build the executable:
```bash
go build -o branch_predictor main.go
```

## Documentation

To view documentation:
```bash
godoc -http=:6060 -index
```
Then navigate to `http://localhost:6060/pkg/github.com/nsengupta5/Branch-Predictor/`

## Creating a Config File

The config file for each algorithm is a JSON file that contains the following fields:
- `algorithm`: The name of the algorithm to use. This can be one of `always-taken`, `two-bit`, `gshare`, or `profiled`.
- `max_lines`: The maximum number of lines to read from the trace file.
- `configs`: A list of configuration objects for the algorithm. Each configuration object represents a particular configuration settings for the various fields of the algorithm. The branch predictor simulator will run a simulation of the algorithm for each configuration oject specified. The fields in each configuration object depend on the algorithm. These fields are as follows:
    - `always-taken`: No additional fields are required.
    - `two-bit`:
        - `table_size`: The size of the two-bit predictor table.
        - `initial_state`: The initial state of the two-bit predictor table
    - `gshare`:
        - `table_size`: The size of the gshare predictor table.
        - `history_length`: The length of the history register.

The `configs` directory contains example configuration files for each algorithm. These examples can be modified to test different configurations of the algorithms.
